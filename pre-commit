#
# Put this file to .git\hooks folder
# It would jshint-validate scripts being commited
#

#!/bin/sh

files=$(git diff --cached --name-only --diff-filter=ACM | grep ".js$")
if [ "$files" = "" ]; then
    exit 0
fi

pass=true

echo "Validating JavaScript:"

for file in ${files}; do
	echo ""

    result=$(jshint ${file} --config .jshintrc)

    if [ "$result" == "" ]; then
        echo "JSHint Passed: ${file}"
		echo $result
    else
        echo "JSHint Failed: ${file}"
		echo $result
        pass=false
    fi
done

echo "JavaScript validation complete"

if ! $pass; then
    echo "COMMIT FAILED: Your commit contains files that should pass JSLint but do not. Please fix the JSLint errors and try again."
    exit 1
else
    echo "COMMIT SUCCEEDED"
fi